---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const t = useTranslations(getLangFromUrl(Astro.url));
---

<section id="home">
    <canvas id="pcbAnimation">
        <p>HTML5?</p>
    </canvas>
    <article class="hero">
        <h1 data-text="Jackestar"></h1>
        <p
            data-text={t('hero.desc')}
        >
        </p>
        <div class="typer" data-text={t('typerList')}></div>
    </article>
    <div class="focus"></div>
</section>

<style>
    section#home {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        color: var(--text-main);

        --dot-color: #fff7;
        --grid-spacing: 20px;
        --major-grid-factor: 5;

        background-image:
            radial-gradient(var(--dot-color) 1px, transparent 1px),
            radial-gradient(var(--dot-color) 0.5px, transparent 1px);

        background-size:
            calc(var(--grid-spacing) * var(--major-grid-factor))
                calc(var(--grid-spacing) * var(--major-grid-factor)),
            var(--grid-spacing) var(--grid-spacing);

        background-position: 0 0;
    }

    section#home canvas {
        position: absolute;
        width: 100%;
        height: 100%;
    }

    section#home article.hero {
        z-index: 2;
        text-align: center;
        background: var(--filter);
        padding: 40px;
        border: 1px solid var(--accent);
        backdrop-filter: blur(5px);
        border-radius: 8px;
        user-select: none;
        z-index: 9;
        transition: 0.2s ease-out;

        will-change: transform, opacity;
        transform-origin: center center;
        transform: scale(0);
        opacity: 0;
    }

    section#home article.hero:hover {
        backdrop-filter: blur(2px);
        transition: 0.2s ease-in;
    }

    section#home article.hero h1 {
        font-size: 52px;
        line-height: 1.4;
        font-weight: 900;
        font-variant: small-caps;
    }

    .typer {
        margin-top: 1rem;
        color: var(--accent);
        font-family: var(--font-code);
        font-size: 1.1rem;
        min-height: 1.4em;
    }

    .typer .typer-text {
        display: inline-block;
    }

    .typer .cursor {
        display: inline-block;
        width: 2px;
        height: 1.2em;
        background: var(--accent);
        margin-left: 6px;
        vertical-align: middle;
        animation: blink 1s steps(2, start) infinite;
    }

    @keyframes blink {
        50% {
            opacity: 0;
        }
    }

    section#home div.focus {
        z-index: 8;
        position: absolute;

        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle,
            transparent 20%,
            rgba(0, 0, 0, 0.5)
        );

        will-change: opacity, filter;
    }
</style>
